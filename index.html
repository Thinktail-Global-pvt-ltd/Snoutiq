<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ✅ Basic Meta -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SnoutIQ - Your AI Pet Companion</title>
    <meta
      name="description"
      content="AI-powered pet care with 24/7 support, vet video consultations, and personalized health insights. Powered by SnoutIQ."
    />
    <meta name="theme-color" content="#3553ff" />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="SnoutIQ" />

    <!-- ✅ Favicons -->
    <link rel="icon" href="/favicon.png" sizes="32x32" type="image/png" />
    <link rel="icon" sizes="192x192" href="/favicon-192.png" />
    <link rel="icon" sizes="512x512" href="/favicon-512.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-512.png" />

    <!-- ✅ Fonts (preconnect + preload + fallback) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      href="/fonts/inter-400.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/inter-700.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- ✅ Base Style -->
    <style>
      /* ========== RESET & BASE ========== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      body {
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, sans-serif;
        background-color: #fff;
        color: #111;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        transition: opacity 0.3s ease-in-out;
      }

      #root {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* ========== SCROLLBAR ========== */
      * {
        scrollbar-width: thin;
        scrollbar-color: #3553ff #f9f9f9;
      }

      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-thumb {
        background: #3553ff;
        border-radius: 8px;
      }

      /* Hide scrollbar on small devices */
      @media (max-width: 640px) {
        ::-webkit-scrollbar {
          display: none;
        }
        body {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      }

      /* ========== PAGE TRANSITIONS ========== */
      body.page-loading {
        opacity: 0;
      }
      body.page-loaded {
        opacity: 1;
      }

      /* Respect user reduced motion preference */
      @media (prefers-reduced-motion: reduce) {
        *,
        html {
          scroll-behavior: auto !important;
          animation-duration: 0.01ms !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>

    <!-- ✅ Main CSS (deferred load) -->
    <link
      rel="preload"
      href="/assets/index.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript><link rel="stylesheet" href="/assets/index.css" /></noscript>

    <!-- ✅ Security (optional but recommended) -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://www.googletagmanager.com https://connect.facebook.net; img-src 'self' https://www.facebook.com data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://connect.facebook.net;"> -->

    <!-- ✅ Google Tag Manager (Lazy Load after 10s) -->
    <script>
      window.addEventListener("load", () => {
        setTimeout(() => {
          (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
            var f = d.getElementsByTagName(s)[0],
              j = d.createElement(s),
              dl = l != "dataLayer" ? "&l=" + l : "";
            j.async = true;
            j.src =
              "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
            f.parentNode.insertBefore(j, f);
          })(window, document, "script", "dataLayer", "GTM-5D756BMW");
        }, 10000);
      });
    </script>

    <!-- ✅ Meta Pixel (Facebook) Lazy Load after 7s -->
    <script>
      setTimeout(() => {
        !(function (f, b, e, v, n, t, s) {
          if (f.fbq) return;
          n = f.fbq = function () {
            n.callMethod
              ? n.callMethod.apply(n, arguments)
              : n.queue.push(arguments);
          };
          if (!f._fbq) f._fbq = n;
          n.push = n;
          n.loaded = !0;
          n.version = "2.0";
          n.queue = [];
          t = b.createElement(e);
          t.async = !0;
          t.src = v;
          s = b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t, s);
        })(
          window,
          document,
          "script",
          "https://connect.facebook.net/en_US/fbevents.js"
        );
        fbq("init", "1909812439872823");
        fbq("track", "PageView");
      }, 7000);
    </script>

    <!-- ✅ Page load transition -->
    <script>
      window.addEventListener("load", () => {
        document.body.classList.add("page-loaded");
      });
    </script>
  </head>

  <body class="page-loading">
    <!-- ✅ GTM NoScript -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-5D756BMW"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe>
    </noscript>

    <!-- ✅ Facebook Pixel NoScript -->
    <noscript>
      <img
        height="1"
        width="1"
        style="display: none"
        src="https://www.facebook.com/tr?id=1909812439872823&ev=PageView&noscript=1"
        alt="Facebook Pixel"
      />
    </noscript>

    <!-- ✅ React App Root -->
    <div id="root"></div>

    <!-- ✅ App Script -->
    <script type="module" src="/src/main.jsx" defer></script>
  </body>
</html>

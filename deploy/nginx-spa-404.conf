# SPA routing with real 404s for unknown URLs.
# Adjust root, server_name, and backend locations for your setup.

server {
    listen 80;
    server_name snoutiq.com www.snoutiq.com;

    root /var/www/snoutiq/dist;
    index index.html;

    # Static assets
    location /assets/ {
        try_files $uri =404;
        access_log off;
        expires 1y;
    }

    location = / {
        try_files /index.html =404;
    }

    # Allow only known SPA routes, everything else -> 404
    location ~ ^/(auth|vet-dashboard|veterinary-practice-software|privacy-policy|terms-of-service|cancellation-policy|cookie-policy|vet-register|medical-data-consent|shipping-policy|consultation-booked|patient-call-test|doctor-receiver-test|call-lab|doctor-receiver|call-demo|csv-upload|s3-upload-test|delhi|gurugram|clinics-solution|blog(/.*)?|doctor-dashboard/[^/]+/?)$ {
        try_files $uri /index.html;
    }

    location / {
        try_files $uri $uri/ =404;
    }

    # Optional: proxy backend API if needed
    # location /backend/ {
    #     proxy_pass https://snoutiq.com/backend/;
    # }
}
